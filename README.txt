
Навайбкодил для судейства соревнований по самбо.


📁 СТРУКТУРА ПРОЕКТА
───────────────────
sambo_scoreboard/
├── main.py                    # Главный файл запуска
├── match_data.py             # Модель с правилами FIAS + история действий
├── spectator_window.py       # Окно для зрителей
├── judge_window.py           # Окно для судей
├── requirements.txt          # Зависимости Python
├── build.bat                 # Скрипт сборки для Windows
├── build.sh                  # Скрипт сборки для Linux/Mac
├── SamboScoreboard.spec     # Конфигурация PyInstaller
├── icon.ico                  # Иконка приложения (опционально)
└── README.txt                # Эта инструкция


🔧 УСТАНОВКА И ЗАПУСК
─────────────────────

ВАРИАНТ 1: Запуск из исходников
────────────────────────────────
1. Установите Python 3.8 или выше
2. Установите зависимости:
   pip install -r requirements.txt

3. Запустите приложение:
   python main.py


ВАРИАНТ 2: Создание .EXE файла
───────────────────────────────

WINDOWS:
1. Запустите build.bat
   (или вручную: pyinstaller SamboScoreboard.spec)

2. Готовый .exe будет в папке dist/SamboScoreboard.exe

3. Скопируйте .exe на любой компьютер и запустите
   (установка Python не требуется)


LINUX/MAC:
1. Сделайте скрипт исполняемым:
   chmod +x build.sh

2. Запустите:
   ./build.sh

3. Готовый файл будет в dist/SamboScoreboard


🎮 ИНСТРУКЦИЯ ПО ИСПОЛЬЗОВАНИЮ
───────────────────────────────

ОКНО ДЛЯ СУДЕЙ (Панель управления):

1. ПОДГОТОВКА:
   • Введите ФАМИЛИИ борцов
   • Введите университеты/клубы

2. УПРАВЛЕНИЕ ТАЙМЕРОМ:
   • [▶ Старт] - запустить таймер матча
   • [⏸ Пауза] - поставить на паузу
   • [↻ Сброс] - сбросить таймер на 5:00

3. НАЧИСЛЕНИЕ ОЧКОВ:
   • [+1] [+2] [+4] - добавить очки борцу
   • Приложение автоматически проверяет тотальную победу (12+ очков)

4. ПРЕДУПРЕЖДЕНИЯ:
   • [⚠ Добавить предупреждение] - БЕЗ уведомлений
   • Очки сопернику начисляются АВТОМАТИЧЕСКИ (1, 2, 1)
   • Желтые квадраты появляются на зрительском табло
   • 4-е предупреждение = дисквалификация (с подтверждением)

5. УДЕРЖАНИЕ:
   • [⏱ Начать удержание] - запустить таймер
   • 10 секунд: +2 очка АВТОМАТИЧЕСКИ (БЕЗ уведомления)
   • 20 секунд: +4 очка + тотальная победа АВТОМАТИЧЕСКИ
   • [⏹ Остановить удержание] - остановить и сбросить

6. ОТМЕНА ДЕЙСТВИЯ: ⭐ НОВОЕ!
   • [↶ ОТМЕНИТЬ ПОСЛЕДНЕЕ ДЕЙСТВИЕ] - фиолетовая кнопка
   • Отменяет последнее начисление очков или предупреждение
   • Можно отменить до 20 последних действий
   • Полезно при случайном нажатии не той кнопки

7. ЗАВЕРШЕНИЕ МАТЧА:
   • [🏆 ПОБЕДА] - объявить победу вручную
   • [⏱ Завершить матч] - определить победителя по FIAS
   • [🔄 СБРОС ВСЕГО] - сбросить весь матч


ОКНО ДЛЯ ЗРИТЕЛЕЙ:

• Показывает все данные в реальном времени
• Фамилии спортсменов: БОЛЬШИЕ (30px)
• 3 желтых квадрата для предупреждений
• Окно можно ПЕРЕМЕЩАТЬ и МАСШТАБИРОВАТЬ
• Переносится на второй монитор/проектор
• При победе - золотая рамка вокруг счета


📋 ПРАВИЛА FIAS В ПРИЛОЖЕНИИ
────────────────────────────

1. СИСТЕМА ПРЕДУПРЕЖДЕНИЙ:
   ┌─────────────────┬──────────────────┬──────────────────┐
   │ Предупреждение  │ Очки сопернику   │ Визуализация     │
   ├─────────────────┼──────────────────┼──────────────────┤
   │ 1-е             │ +1 очко          │ 🟨⬜⬜            │
   │ 2-е             │ +2 очка          │ 🟨🟨⬜            │
   │ 3-е             │ +1 очко          │ 🟨🟨🟨            │
   │ 4-е             │ Дисквалификация  │ Матч завершен    │
   └─────────────────┴──────────────────┴──────────────────┘

2. СИСТЕМА УДЕРЖАНИЯ:
   • 10 секунд → +2 очка (автоматически)
   • 20 секунд → +4 очка + тотальная победа

3. ТОТАЛЬНАЯ ПОБЕДА:
   • Разница 12+ очков
   • Удержание 20 секунд
   • Дисквалификация соперника
   • Болевой прием (кнопка "Победа")

4. ПОБЕДА ПО ВРЕМЕНИ:
   • 8-11 очков разницы → Победа по преимуществу
   • 1-7 очков → Победа по очкам
   • Равенство → По предупреждениям
   • Полная ничья → Решение судей


💡 ПРИМЕРЫ ИСПОЛЬЗОВАНИЯ
────────────────────────

ПРИМЕР 1: Отмена случайного нажатия
───────────────────────────────────
Ситуация: Судья случайно нажал [+4] для Борца 1

Решение:
1. Нажмите [↶ ОТМЕНИТЬ ПОСЛЕДНЕЕ ДЕЙСТВИЕ]
2. Счет вернется к предыдущему значению
3. Продолжайте матч

ПРИМЕР 2: Предупреждение (БЕЗ уведомлений)
──────────────────────────────────────────
Действие: Борец 2 получил предупреждение

1. Судья нажимает [⚠ Добавить предупреждение] для Борца 2
2. БЕЗ всплывающих окон:
   - Борцу 1 автоматически +1 очко
   - На зрительском табло появляется желтый квадрат
   - Счетчик предупреждений: 1/3
3. Матч продолжается

ПРИМЕР 3: Удержание 20 секунд
────────────────────────────
1. Судья нажимает [⏱ Начать удержание]
2. Таймер идет: 1, 2, 3... 10 секунд
   → +2 очка АВТОМАТИЧЕСКИ (БЕЗ уведомления)
3. Таймер: 11, 12... 20 секунд
   → +4 очка, тотальная победа, матч останавливается
4. Золотая рамка вокруг счета победителя


🎯 ТЕХНИЧЕСКИЕ ОСОБЕННОСТИ
──────────────────────────

МАСШТАБИРОВАНИЕ ОКОН:
• Оба окна можно свободно изменять размер
• Минимальный размер зрительского окна: 800x500
• Минимальный размер судейского окна: 900x600
• Можно перетащить на любой монитор

ФУНКЦИЯ ОТМЕНЫ (Undo):
• Хранится история последних 20 действий
• Отменяются: начисление очков, предупреждения
• Восстанавливается полное состояние матча
• Обновляются оба окна синхронно

БЕЗ ВСПЛЫВАЮЩИХ УВЕДОМЛЕНИЙ:
• Предупреждения добавляются тихо
• Очки за удержание начисляются тихо
• Остаются только критичные подтверждения:
  - Дисквалификация (4-е предупреждение)
  - Объявление победы вручную
  - Сброс всего матча


📦 СОЗДАНИЕ .EXE ФАЙЛА
──────────────────────

ПРОСТОЙ СПОСОБ (рекомендуется):
1. Запустите build.bat (Windows) или build.sh (Linux/Mac)
2. Готовый .exe будет в папке dist/

РУЧНАЯ СБОРКА:
pyinstaller --onefile --windowed --name="SamboScoreboard" main.py

С ИКОНКОЙ (если есть icon.ico):
pyinstaller SamboScoreboard.spec

РАЗМЕР ФАЙЛА:
• Около 50-80 МБ (включает Python runtime + PyQt6)
• Один .exe файл - ничего больше не нужно
• Запускается на любом Windows компьютере


🛠️ РЕШЕНИЕ ПРОБЛЕМ
──────────────────

Проблема: Окна не масштабируются
Решение: Потяните за край окна мышью

Проблема: .exe не запускается
Решение: 
  • Проверьте антивирус (может блокировать)
  • Запустите от имени администратора
  • Пересоберите с --windowed флагом

Проблема: Кнопка отмены не работает
Решение: Возможно, нет действий в истории


═══════════════════════════════════════════════════════════════════
         ГОТОВО! ПРОФЕССИОНАЛЬНОЕ ТАБЛО С ОТМЕНОЙ ДЕЙСТВИЙ! 🥋
═══════════════════════════════════════════════════════════════════

Версия: 3.0 (Финальная)
Дата: Октябрь 2025
Правила: FIAS 2023

Все правила соответствуют официальным правилам
Международной федерации самбо (FIAS)
